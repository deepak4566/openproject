<ng-container
  *ngIf="(dailyReminders$ | async) && (selectedTimes$ | async) as selectedTimes">
  <!-- TODO: use checkbox component for the enabled input -->
  <div
    class="op-reminder-settings-daily-time--enable">
    <input
      [ngModel]="enabled$ | async"
      (ngModelChange)="toggleEnabled($event)"
      type="checkbox"
      id="op-reminder-settings-daily-time--enable">
    <label
      for="op-reminder-settings-daily-time--enable"
      [textContent]="text.enable">
    </label>
  </div>

  <div *ngFor="let time of selectedTimes; index as i; trackBy: index"
    class="op-reminder-settings-daily-time--row">
    <input
      type="checkbox"
      [ngModel]="isActive(time)"
      (ngModelChange)="toggleActive($event, i, selectedTimes)"
      [disabled]="(activeTimes$ | async).length === 0 || (activeTimes$ | async).length === 1 && (activeTimes$ | async)[0] === time"
      class="op-reminder-settings-daily-time--active"
      attr.data-qa-selector="op-settings-daily-time--active-{{i + 1}}">
    <label
      class="op-reminder-settings-daily-time--label"
      [textContent]="text.timeLabel(i + 1)"
      attr.for="op-reminder-settings-daily-time-{{i + 1}}--time">
    </label>
    <select
      [ngModel]="time"
      (ngModelChange)="changeTime($event, selectedTimes, i)"
      [disabled]="(enabled$ | async) === false"
      class="op-reminder-settings-daily-time--time form--select -narrow"
      attr.id="op-reminder-settings-daily-time-{{i + 1}}--time"
      required="true">
      <option
        *ngFor="let availableTime of availableTimes"
        [value]="availableTime"
        [disabled]="time !== availableTime && selectedTimes.includes(availableTime)">
        {{timeLabel(availableTime)}}
      </option>
    </select>
    <button
      class="op-link op-reminder-settings-daily-time--remove"
      type="button"
      *ngIf="timeRemovable$ | async"
      (click)="removeTime(selectedTimes, i)"
      attr.data-qa-selector="op-settings-daily-time--remove-{{i + 1}}">
      <op-icon icon-classes="icon-small icon-remove icon4"></op-icon>
    </button>
  </div>

  <button
    class="button op-reminder-settings-daily-time--add"
    [disabled]="nonAddable$ | async"
    (click)="addTime(selectedTimes)">
    <i class="button--icon icon-add"></i>
    <span class="button--text">{{text.addTime}}</span>
  </button>
</ng-container>