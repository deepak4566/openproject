<op-autocompleter
  [model]="value"

  [getOptionsFn]="getAvailableUsers.bind(this)"
  [trackByFn]="userTracker"

  [multiple]="multiple"
  [labelForId]="labelForId"

  [appendTo]="appendTo"

  (change)="writeValue($event)"
  (keydown.escape)="cancel.emit()"
>
  <ng-template
    op-autocompleter-option-tmp
    let-item
    let-search="search"
  >
    <op-principal
      *ngIf="item && item.href"
      [principal]="item"
      [hideName]="true"
      size="mini"
    ></op-principal>
    <span [opSearchHighlight]="search">
      {{ item.name }}
    </span>
  </ng-template>
</op-autocompleter>

<input
  #hiddenInput
  [name]="name"
  type="hidden"
  [value]="plainValue"
/>
