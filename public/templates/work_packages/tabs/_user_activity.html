<div class="work-package-details-activities-activity-contents"
     ng-mouseover="showActions()"
     ng-mouseout="hideActions()">
  <div class="comments-number"><a ng-href="#{{ currentAnchor }}" ng-bind="'#' + activityNo"></a>
    <div class="comments-icons"
         ng-show="activity.props._type == 'Activity::Comment' && inFocus">
      <i class="icon-quote action-icon"
         ng-if="userCanQuote"
         ng-click="quoteComment()"></i>
      <i class="icon-edit action-icon"
         ng-if="userCanEdit"
         ng-click="editComment()"></i>
    </div>
  </div>
  <img class="avatar" ng-src="{{ userAvatar }}" />
  <span class="user" ng-if="userActive"><a ng-href="{{ userPath(userId) }}" name="{{ currentAnchor }}" ng-bind="userName"></a></span>
  <span class="user" ng-if="!userActive">{{ userName }}</span>
  <span class="date">{{ I18n.t('js.label_commented_on') }} <date-time date-time-value="activity.props.createdAt"/></date-time>
  <span class="comment wiki">
    <div ng-if="inEdit">
      <form name="editCommentForm">
        <div>
          <textarea id="edit-comment-text"
                    name="edit_comment_text"
                    class="add-comment-text"
                    ng-model="activity.props.rawComment"
                    ng-bind-html="activity.props.rawComment"
                    rows="4"
                    required></textarea>
        </div>
        <div>
          <button class="button"
                  ng-click="updateComment()"
                  ng-disabled="editCommentForm.$invalid"><i class="icon-yes icon-left"></i>{{ I18n.t('js.button_save') }}
          </button>
          <button class="button" ng-disabled="commentForm.$invalid" ng-click="cancelEdit()"><i class="icon-close icon-left"></i>{{ I18n.t('js.button_cancel') }}</button>
        </div>
      </form>
    </div>
    <span ng-if="!inEdit"
          class="message"
          ng-show="activity.props._type == 'Activity::Comment'"
          ng-bind-html="activity.props.comment"/>
    <ul class="work-package-details-activities-messages">
      <li ng-repeat="detail in activity.props.htmlDetails track by $index">
        <span class="message" ng-bind-html="detail"/>
      </li>
    </ul>
  </span>
</div>
